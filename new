#!/usr/bin/env bash
set -euE

acc='npx acc'

$acc new "$1" --template haskell --choice all
# mkdir "$1"

# For HLS
cat _acc/hie.yaml     | sed "s;_acc;$1;g" > "$1/hie.yaml"

package_name="$(printf '%s' "$1" | sed 's/_/-/g')"

# stack
cat _acc/package.yaml | sed "s;^name:.*;name: $package_name;g" > "$1/package.yaml"
cat _acc/stack.yaml > "$1/stack.yaml"

# cabal
cat _acc/_acc.cabal | sed "s;_acc;$1;g" > "$1/$1.cabal"

# Emacs
: > "$1/.projectile"

